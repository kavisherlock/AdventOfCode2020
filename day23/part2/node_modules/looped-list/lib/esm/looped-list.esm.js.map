{"version":3,"file":"looped-list.esm.js","sources":["../../src/looped-list-item.js","../../src/looped-list.js"],"sourcesContent":["class LoopedListItem {\n    /**\n     * @param {Any} value\n     * @param {Boolean} [is_first=false]\n     */\n    constructor(value, is_first = false) {\n        this.value = value;\n\n        // Pointers to other LoopedListItems\n        this.next_item = undefined;\n        this.prev_item = undefined;\n\n        // Set next and prev to itself\n        if (is_first) {\n            this.next_item = this;\n            this.prev_item = this;\n        }\n    }\n\n    /**\n     * @param {Number} n\n     * @returns {LoopedListItem}\n     */\n    next(n = 1) {\n        n = Math.trunc(n);\n\n        if (n === 0) {\n            return this;\n        } else if (n < 0) {\n            return this.prev(Math.abs(n));\n        }\n\n        let current = this;\n        do {\n            current = current.next_item;\n        } while (--n);\n        return current;\n    }\n\n    /**\n     * @param {Number} n\n     * @returns {LoopedListItem}\n     */\n    prev(n = 1) {\n        n = Math.trunc(n);\n\n        if (n === 0) {\n            return this;\n        } else if (n < 0) {\n            return this.next(Math.abs(n));\n        }\n\n        let current = this;\n        do {\n            current = current.prev_item;\n        } while (--n);\n        return current;\n    }\n\n    /**\n     * @param {LoopedListItem} item\n     * @returns {LoopedListItem} Returns the item we just inserted\n     */\n    insertNext(item) {\n        this.next_item.prev_item = item;\n        item.next_item = this.next_item;\n\n        this.next_item = item;\n        item.prev_item = this;\n\n        return item;\n    }\n\n    /**\n     * @param {LoopedListItem} item\n     * @returns {LoopedListItem} Returns the item we just inserted\n     */\n    insertPrev(item) {\n        this.prev_item.next_item = item;\n        item.next_item = this;\n\n        item.prev_item = this.prev_item;\n        this.prev_item = item;\n\n        return item;\n    }\n\n    /**\n     * @returns {LoopedListItem}\n     */\n    removeSelf() {\n        this.next_item.prev_item = this.prev_item;\n        this.prev_item.next_item = this.next_item;\n\n        return this;\n    }\n}\n\nexport default LoopedListItem;\n","import LoopedListItem from './looped-list-item';\n\nclass LoopedList {\n    /**\n     * @param {Any} value\n     */\n    constructor(value) {\n        // Keep head unset if we didn't pass in a value\n        this.head = undefined;\n\n        if (Array.isArray(value) && value.length) {\n            /**\n             * When an array is passed, use the first value as the `head`,\n             * and loop through other values and insert them.\n             */\n            let intial_value = value[0];\n\n            this.setHead(intial_value);\n\n            if (value.length > 2) {\n                // Loop through remaining values\n                for (let i = 1; i < value.length; i++) {\n                    this.insertNext(value[i]);\n                }\n\n                // Move forward one tick to reset head back to `intial_value`\n                this.move(1);\n            }\n        } else if (typeof value !== 'undefined') {\n            this.setHead(value);\n        }\n    }\n\n    /**\n     * @chainable\n     * @param {Any} value - If the value is not a `LoopedListItem`, it'll be converted into one, unless `undefined` is passed, which essentially \"unsets\" the head.\n     * @returns {LoopedList} Returns `this`\n     */\n    setHead(value) {\n        if (!(value instanceof LoopedListItem) && value !== undefined) {\n            value = new LoopedListItem(value, true);\n        }\n        this.head = value;\n\n        return this;\n    }\n\n    /**\n     * Sets the `head` to `undefined`, effectively removing all list items.\n     * @chainable\n     * @returns {LoopedList} Returns `this`\n     */\n    unsetHead() {\n        return this.setHead(undefined);\n    }\n\n    /**\n     * @deprecated - Use `setHead(value)` instead.\n     */\n    init(...args) {\n        return this.setHead(...args);\n    }\n\n    /**\n     * Moves the head pointer forward or backward by a number of steps.\n     * @chainable\n     * @param {Number} steps Any number. If a negative number is passed, the head pointer moves backwards.\n     * @returns {LoopedList} Returns `this`\n     */\n    move(steps = 1) {\n        steps = Math.trunc(steps);\n\n        // Steps can be negative to move backwards\n        let direction = steps > 0 ? 'next' : 'prev';\n\n        steps = Math.abs(steps);\n        this.head = this.head[direction](steps);\n\n        return this;\n    }\n\n    /**\n     * @chainable\n     * @param {Any|LoopedListItem} item\n     * @returns {LoopedList} Returns `this`\n     */\n    insertNext(item) {\n        if (!(item instanceof LoopedListItem)) {\n            item = new LoopedListItem(item);\n        }\n        this.head = this.head.insertNext(item);\n\n        return this;\n    }\n\n    /**\n     * @chainable\n     * @param {Any|LoopedListItem} item\n     * @returns {LoopedList} Returns `this`\n     */\n    insertPrev(item) {\n        if (!(item instanceof LoopedListItem)) {\n            item = new LoopedListItem(item);\n        }\n        this.head = this.head.insertPrev(item);\n\n        return this;\n    }\n\n    /**\n     * @returns {LoopedListItem} Returns the old `head`\n     */\n    popHeadMoveNext() {\n        let next_item = this.head.next_item;\n        let old_head = this.head.removeSelf();\n        this.head = next_item;\n\n        return old_head;\n    }\n\n    /**\n     * @returns {LoopedListItem} Returns the old `head`\n     */\n    popHeadMovePrev() {\n        let prev_item = this.head.prev_item;\n        let old_head = this.head.removeSelf();\n        this.head = prev_item;\n\n        return old_head;\n    }\n\n    /**\n     * @returns {Number} Returns the number of items in our LoopedList.\n     */\n    length() {\n        let head = this.head;\n\n        if (!head) {\n            return 0;\n        }\n\n        let next = head.next_item;\n\n        let length = 1;\n\n        while (next !== head) {\n            length++;\n            next = next.next_item;\n        }\n\n        return length;\n    }\n\n    /**\n     * Searches for the item and returns that item if it is found. Returns `undefined` if the value is not found.\n     * @param {Any|LoopedListItem} value You can pass in a primative value or a `LoopedListItem`.\n     * @returns {LoopedListItem|undefined}\n     */\n    find(value) {\n        let get_value = !(value instanceof LoopedListItem);\n        let head = this.head;\n\n        if (!head) {\n            return;\n        }\n\n        let next = this.head;\n\n        do {\n            let next_value = get_value ? next.value : next;\n            if (value === next_value) {\n                return next;\n            }\n            next = next.next_item;\n        } while (next !== head);\n    }\n\n    /**\n     * An iterator for the `LoopedListItem` objects.\n     * @alias LoopedList.prototype[@@iterator]\n     * @generator\n     * @function\n     * @returns {Any} Yields the `LoopedListItem` objects in our list, starting with `this.head`.\n     */\n    *[Symbol.iterator]() {\n        yield* this.items();\n    }\n\n    /**\n     * An iterator for the `LoopedListItem` objects.\n     * @generator\n     * @returns {Any} Yields the `LoopedListItem` objects in our list, starting with `this.head`.\n     */\n    *items() {\n        let head = this.head;\n\n        if (!head) {\n            return;\n        }\n\n        yield head;\n\n        let next = head.next_item;\n\n        while (next !== head) {\n            yield next;\n            next = next.next_item;\n        }\n    }\n\n    /**\n     * An iterator for _values_ of the `LoopedListItem` objects.\n     * @generator\n     * @returns {Any} Yields the _values_ of the `LoopedListItem` objects in our list, starting with `this.head`.\n     * @example assert.deepStrictEqual([...(new LoopedList([1, 2, 3])).values()], [1, 2, 3]);\n     */\n    *values() {\n        let items = this.items();\n        for (let item of items) {\n            yield item.value;\n        }\n    }\n}\n\nexport default LoopedList;\n"],"names":[],"mappings":"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"}